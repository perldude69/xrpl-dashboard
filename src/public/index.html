<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XRPL Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
</head>
<body class="theme-dark">
     <div id="menu">
         <button id="exportData">Export Data JSON</button>
         <input type="file" id="importData" accept=".json" style="display: none;">
          <button id="importBtn">Import Data JSON</button>
          <select id="themeSelector">
              <option value="dark">Dark</option>
              <option value="light">Light</option>
              <option value="neon">Neon</option>
              <option value="minimal">Minimal</option>
          </select>
          <button id="newPanel">New Panel</button>
     </div>
     <div class="panels-container">
     </div>

    <div class="panel" id="graphPanel">
        <div class="summary" onclick="event.stopPropagation(); togglePanel('graph')" style="position: relative;">
            <span class="edit-icon" data-panel="graph" style="position: absolute; top: 5px; right: 5px; cursor: pointer; color: #00ff00; font-size: 16px;">&#9997;</span>
            <div>XRP Price Graph</div><div>Latest: <span id="smallCurrentPrice">Loading...</span></div>
        </div>
         <div class="full" id="graphFull" style="display: none;">
             <button onclick="event.stopPropagation(); togglePanel('graph')" style="position: absolute; top: 10px; right: 10px; background: #000; color: #ff6600; border: 1px solid #ff6600; font-size: 20px; cursor: pointer;">×</button>
            <h1>XRP Price Graph - Current: <span id="currentPrice" style="color: #00ff00;">Loading...</span></h1>
            <div style="margin-bottom: 10px;">
                <label>Period: </label>
            <select id="periodSelect">
                <option value="1d">Last 1 Day</option>
                <option value="7d">Last 7 Days</option>
                <option value="30d" selected>Last 30 Days</option>
                <option value="90d">Last 90 Days</option>
                <option value="all">All Time</option>
            </select>
                <label style="margin-left: 20px;">Interval: </label>
            <select id="intervalSelect">
                <option value="1m">1 Minute</option>
                <option value="1h">1 Hour</option>
                <option value="4h" selected>4 Hours</option>
                <option value="12h">12 Hours</option>
                <option value="1d">1 Day</option>
            </select>
                <button id="refreshGraph" style="margin-left: 20px; background: #000; color: #00ff00; border: 1px solid #ff6600;">Refresh</button>
            </div>

            <canvas id="priceChart" style="width: 80%; height: 200px;" onclick="event.stopPropagation()"></canvas>
        </div>
    </div>

    <div class="panel">
        <h1>Wallet Monitoring</h1>
        <p class="threshold">Enter XRP addresses to monitor balances and activities</p>
        <input type="text" id="walletAddresses" class="wallet-input" placeholder="Enter addresses separated by commas">
        <button id="setAddresses" style="background: #000; color: #00ff00; border: 1px solid #ff6600; padding: 5px;">Set Addresses</button>
        <button id="trackActivity" style="background: #000; color: #00ff00; border: 1px solid #ff6600; padding: 5px; margin-left: 10px;">Track Activity</button>
        <div class="toggle-btn" id="toggleWalletManage">Manage Wallets ▼</div>
        <div id="walletSubpanel" class="wallet-subpanel hidden">
            <h4>Add Wallet</h4>
            <input type="text" id="singleWalletAddress" class="wallet-input" placeholder="Enter a single wallet address" style="width: 300px;">
            <button id="addSingleWallet" style="background: #000; color: #00ff00; border: 1px solid #ff6600; padding: 5px; margin-left: 10px;">Add Wallet</button>
            <h4>Managed Wallets</h4>
            <ul id="managedWalletList" class="wallet-list"></ul>
        </div>
        <h3>Balances</h3>
        <ul id="balanceList"></ul>
        <h3>Recent Activities</h3>
         <ul id="activityList" style="max-height: 200px; overflow-y: auto;"></ul>
     </div>

     <div class="panel">
         <h1>Transaction Notifications</h1>
         <p class="threshold">Real-time alerts for transactions above your configured limits</p>
         <div id="notifications" style="max-height: 300px; overflow-y: auto;"></div>
     </div>
    <div id="ledgerOverlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); z-index: 2000; color: #00ff00; font-family: 'Courier New', monospace; font-size: 12px; padding: 20px; overflow: auto;">
        <button id="closeOverlay" style="position: absolute; top: 10px; right: 50px; background: #000; color: #ff6600; border: 1px solid #ff6600; font-size: 20px; cursor: pointer;">×</button>
        <h2>Ledger Transactions</h2>
        <div id="ledgerTxList"></div>
    </div>
    <div id="editModal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #000; border: 2px solid #ff6600; padding: 20px; z-index: 1001; color: #00ff00;">
        <span id="closeEditModal" style="position: absolute; top: 5px; right: 5px; cursor: pointer; font-size: 20px;">×</span>
        <h3>Edit Panel</h3>
        <div id="editError" style="color: red; margin-bottom: 10px;"></div>
        <div id="editModalContent"></div>
        <button id="deletePanel" style="background: #ff0000; color: #fff; margin-top: 10px;">Delete Panel</button>
    </div>
    <div id="newPanelModal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #000; border: 2px solid #ff6600; padding: 20px; z-index: 1001; color: #00ff00;">
        <span id="closeNewModal" style="position: absolute; top: 5px; right: 5px; cursor: pointer; font-size: 20px;">×</span>
        <h3>New Panel</h3>
        <label>Name: <input id="newCurrencyName" style="background: #000; color: #00ff00; border: 1px solid #ff6600;"></label><br><br>
        <label>Currency Code: <input id="newCurrencyCode" style="background: #000; color: #00ff00; border: 1px solid #ff6600;"></label><br><br>
        <label>Issuer Wallet: <input id="newIssuer" style="background: #000; color: #00ff00; border: 1px solid #ff6600;"></label><br><br>
        <label>Limit: <input id="newLimit" type="number" style="background: #000; color: #00ff00; border: 1px solid #ff6600;"></label><br><br>
        <button id="createPanel">Create</button>
        <button id="cancelPanel">Cancel</button>
    </div>
    <div id="modalOverlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;"></div>
    <script src="/socket.io/socket.io.js?v=1"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="themes.js?v=1"></script>
    <script src="utils.js?v=2"></script>
    <script src="socket.js?v=2"></script>
    <script src="panels.js?v=2"></script>
    <script src="transactions.js?v=2"></script>
    <script src="ledger.js?v=2"></script>
    <script src="wallet.js?v=2"></script>
    <script src="prices.js?v=2"></script>
    <script src="modals.js?v=2"></script>
    <script src="data.js?v=2"></script>
    <script src="main.js?v=2"></script>
</body>
</html>